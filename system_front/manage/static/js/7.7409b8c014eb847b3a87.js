webpackJsonp([7],{220:function(t,e,a){a(300);var r=a(92)(a(253),a(323),null,null);t.exports=r.exports},230:function(t,e,a){a(233);var r=a(92)(a(231),a(234),null,null);t.exports=r.exports},231:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(57),n=a.n(r),i=a(56),s=a.n(i),o=a(58),l=a.n(o),c=a(93),_=(a(95),a(94));e.default={data:function(){return{url:"https://40964096.xyz/xiaojiejie.jpg"}},created:function(){this.adminInfo.id||this.getAdminData()},computed:l()({},a.i(_.b)(["adminInfo"])),methods:l()({},a.i(_.c)(["getAdminData"]),{handleCommand:function(t){var e=this;return s()(n.a.mark(function r(){var i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("home"!=t){r.next=4;break}e.$router.push("/manage"),r.next=9;break;case 4:if("signout"!=t){r.next=9;break}return r.next=7,a.i(c.k)();case 7:i=r.sent,1==i.status?(e.$message({type:"success",message:"退出成功"}),e.$router.push("/")):e.$message({type:"error",message:i.message});case 9:case"end":return r.stop()}},r,e)}))()}})}},232:function(t,e,a){e=t.exports=a(203)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},233:function(t,e,a){var r=a(232);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(204)("1a5dfe8b",r,!0)},234:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[t._v("首页")]),t._v(" "),t._l(t.$route.meta,function(e,r){return a("el-breadcrumb-item",{key:r},[t._v(t._s(e))])})],2),t._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.url}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"signout"}},[t._v("退出")])],1)],1)],1)},staticRenderFns:[]}},253:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(57),n=a.n(r),i=a(56),s=a.n(i),o=a(230),l=a.n(o),c=(a(95),a(93));a(59);e.default={data:function(){return{value1:!1,tableData:[],selectTable:{},searchForm:{start_station:"",end_station:"",datetime:""},seat_count_list:[],dialogTableVisible:!1,dialogTableVisible_GD:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",currentRow:null,offset:0,limit:5,count:0,currentPage:1,stationData:[]}},created:function(){var t=this;return s()(n.a.mark(function e(){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(c.v)();case 2:r=e.sent,t.stationData=r.dataLists;case 4:case"end":return e.stop()}},e,t)}))()},components:{headTop:l.a},methods:{submitForm:function(t){var e=this;return s()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.$refs[t].validate(function(){var t=s()(n.a.mark(function t(r){var i,s,o,l,_;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return i=void 0,i=new Date(e.searchForm.datetime),s=i.getFullYear()+"-"+e.checkTime(i.getMonth()+1)+"-"+e.checkTime(i.getDate()),console.log(e.searchForm.start_station+s),e.tableData=[],t.next=8,a.i(c.w)({train_start_station:e.searchForm.start_station,train_end_station:e.searchForm.end_station,datetime:s});case 8:if(o=t.sent,1==o.status){for(e.tableData=[],l=0;l<o.trainTransferTicketPriceInfoList.length;l++)_={},_.train_no_1=o.trainTransferTicketPriceInfoList[l].train_no_1,_.train_no_2=o.trainTransferTicketPriceInfoList[l].train_no_2,_.end_station_no=o.trainTransferTicketPriceInfoList[l].end_station_no,_.start_station_no=o.trainTransferTicketPriceInfoList[l].start_station_no,_.transfer_station_no_1=o.trainTransferTicketPriceInfoList[l].transfer_station_no_1,_.transfer_station_no_2=o.trainTransferTicketPriceInfoList[l].transfer_station_no_2,_.start_station_name=o.trainTransferTicketPriceInfoList[l].start_station_name,_.train_number_1=o.trainTransferTicketPriceInfoList[l].train_number_1,_.start_time_1=o.trainTransferTicketPriceInfoList[l].start_time_1,_.arrive_time_1=o.trainTransferTicketPriceInfoList[l].arrive_time_1,_.transfer_station_name=o.trainTransferTicketPriceInfoList[l].transfer_station_name,_.train_number_2=o.trainTransferTicketPriceInfoList[l].train_number_2,_.start_time_2=o.trainTransferTicketPriceInfoList[l].start_time_2,_.arrive_time_2=o.trainTransferTicketPriceInfoList[l].arrive_time_2,_.arrive_station_name=o.trainTransferTicketPriceInfoList[l].end_station_name,_.high_seat_price_1=o.trainTransferTicketPriceInfoList[l].high_seat_price_1,_.medium_seat_price_1=o.trainTransferTicketPriceInfoList[l].medium_seat_price_1,_.low_seat_price_1=o.trainTransferTicketPriceInfoList[l].low_seat_price_1,_.high_seat_price_2=o.trainTransferTicketPriceInfoList[l].high_seat_price_2,_.medium_seat_price_2=o.trainTransferTicketPriceInfoList[l].medium_seat_price_2,_.low_seat_price_2=o.trainTransferTicketPriceInfoList[l].low_seat_price_2,_.transfer_time=e.getMin(o.trainTransferTicketPriceInfoList[l].arrive_time_1,o.trainTransferTicketPriceInfoList[l].start_time_2),_.sum_running_time=e.getSumTime(_.transfer_time,e.getMin(o.trainTransferTicketPriceInfoList[l].start_running_time_1,o.trainTransferTicketPriceInfoList[l].end_running_time_1),e.getMin(o.trainTransferTicketPriceInfoList[l].start_running_time_2,o.trainTransferTicketPriceInfoList[l].end_running_time_2)),e.tableData.push(_);e.TrainRank(),e.$message({type:"success",message:"查询成功"})}else 404==o.status?e.$message({type:"error",message:"没有符合条件的列车"}):406==o.status?e.$message({type:"error",message:"没有符合条件的列车"}):e.$message({type:"error",message:"查询失败"});case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return r.stop()}},r,e)}))()},checkTime:function(t){return t<10&&(t="0"+t),t},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.currentPage=t,this.offset=(t-1)*this.limit,this.getLists()},getMin:function(t,e){var a=t.split(":"),r=e.split(":"),n=60*parseInt(a[0])+parseInt(a[1]),i=60*parseInt(r[0])+parseInt(r[1]),s=i-n,o=Math.floor(s/60),l=s%60,c=o.toString(),_=l.toString(),u="",m="";return m=1==c.length?"0"+c:c,u=1==_.length?"0"+_:_,m+":"+u},getSumTime:function(t,e,a){var r=t.split(":"),n=e.split(":"),i=a.split(":"),s=60*parseInt(r[0])+parseInt(r[1]),o=60*parseInt(n[0])+parseInt(n[1]),l=60*parseInt(i[0])+parseInt(i[1]),c=s+o+l,_=Math.floor(c/60),u=c%60,m=_.toString(),p=u.toString(),f="",d="";return d=1==m.length?"0"+m:m,f=1==p.length?"0"+p:p,d+":"+f},handleSearch:function(t,e,r,i,o,l,_,u,m){var p=this;return s()(n.a.mark(function s(){var f,d,h,b,g;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=void 0,f=new Date(t),d=f.getFullYear()+"-"+p.checkTime(f.getMonth()+1)+"-"+p.checkTime(f.getDate()),n.next=5,a.i(c.x)({datetime:d,train_no_1:e,start_station_no:r,transfer_station_no_1:i,train_number_1:o,train_no_2:l,train_number_2:_,transfer_station_no_2:u,end_station_no:m});case 5:if(h=n.sent,1==h.status){for(p.seat_count_list=[],b=0;b<h.trainTransferSeatCountList.length;b++)g={},g.train_number=h.trainTransferSeatCountList[b].train_number,g.carriage_no=h.trainTransferSeatCountList[b].carriage_no,g.seat_type=h.trainTransferSeatCountList[b].seat_type,g.seat_count=h.trainTransferSeatCountList[b].seat_count,p.seat_count_list.push(g);p.$message({type:"success",message:"查询成功"}),p.dialogTableVisible=!0}else p.$message({type:"error",message:"查询失败"});case 7:case"end":return n.stop()}},s,p)}))()},handleBuy:function(t,e,a,r,n,i,s,o,l,c,_,u,m,p,f){var d=void 0;d=new Date(t);var h=d.getFullYear()+"-"+this.checkTime(d.getMonth()+1)+"-"+this.checkTime(d.getDate());this.$router.push({path:"/TransferTicketOrder",query:{datetime:h,train_no_1:e,train_number_1:n,high_seat_price_1:c,medium_seat_price_1:_,low_seat_price_1:u,start_station_no:a,transfer_station_no_1:r,transfer_station_no_2:o,end_station_no:l,train_no_2:i,train_number_2:s,high_seat_price_2:m,medium_seat_price_2:p,low_seat_price_2:f}})},TrainRank:function(){if(!1===this.value1){for(var t=0;t<this.tableData.length;t++)for(var e=0;e<this.tableData.length-t-1;e++)if(this.transferTime(this.tableData[e].start_time_1)>this.transferTime(this.tableData[e+1].start_time_1)){var a=this.tableData[e];this.tableData[e]=this.tableData[e+1],this.tableData[e+1]=a}}else for(var r=0;r<this.tableData.length;r++)for(var n=0;n<this.tableData.length-r-1;n++)if(this.transferTime(this.tableData[n].sum_running_time)>this.transferTime(this.tableData[n+1].sum_running_time)){var i=this.tableData[n];this.tableData[n]=this.tableData[n+1],this.tableData[n+1]=i}},transferTime:function(t){var e=t.split(":");return 60*parseInt(e[0])+parseInt(e[1])},handelUpdate:function(){this.TrainRank()},querySearch:function(t,e){var a=this;return s()(n.a.mark(function r(){var i,s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=a.stationData,s=t?i.filter(a.createFilter(t)):i,clearTimeout(a.timeout),a.timeout=setTimeout(function(){e(s)},1e3*Math.random());case 4:case"end":return r.stop()}},r,a)}))()},createFilter:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}}}}},277:function(t,e,a){e=t.exports=a(203)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.demo-table-expand{font-size:0}.demo-table-expand label{width:90px;color:#99a9bf}.demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:50%}.table_container{padding:20px}.Pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;margin-top:8px}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}",""])},300:function(t,e,a){var r=a(277);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(204)("11f8a91a",r,!0)},323:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("meta",{attrs:{"http-equiv":"Cache-Control",content:"no-cache,no-store,must-revlidate"}}),t._v(" "),a("meta",{attrs:{"http-equiv":"Expires",content:"O"}}),t._v(" "),a("meta",{attrs:{"http-equiv":"Pragma",content:"no-cache"}}),t._v(" "),a("head-top"),t._v(" "),a("el-form",{ref:"searchForm",attrs:{model:t.searchForm}},[a("el-row",{staticStyle:{"margin-left":"180px","margin-top":"10px",width:"1000px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入始发站","trigger-on-focus":!0},on:{select:t.handleSelect},model:{value:t.searchForm.start_station,callback:function(e){t.$set(t.searchForm,"start_station",e)},expression:"searchForm.start_station"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"margin-left":"20px"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入终点站","trigger-on-focus":!0},on:{select:t.handleSelect},model:{value:t.searchForm.end_station,callback:function(e){t.$set(t.searchForm,"end_station",e)},expression:"searchForm.end_station"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"margin-left":"20px"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.searchForm.datetime,callback:function(e){t.$set(t.searchForm,"datetime",e)},expression:"searchForm.datetime"}})],1)])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.submitForm("searchForm")}}},[t._v("搜索")])],1)]),t._v(" "),a("el-switch",{staticStyle:{"margin-top":"30px","margin-left":"20px"},attrs:{"inactive-text":"按开车时间排序","active-text":"按运行时间排序"},nativeOn:{click:function(e){return t.handelUpdate()}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)],1),t._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"车次"}},[a("span",[t._v(t._s(e.row.train_number_1))])]),t._v(" "),a("el-form-item",{attrs:{label:"特等座/软卧"}},[a("span",[t._v(t._s(e.row.high_seat_price_1))])]),t._v(" "),a("el-form-item",{attrs:{label:"一等座/硬卧"}},[a("span",[t._v(t._s(e.row.medium_seat_price_1))])]),t._v(" "),a("el-form-item",{attrs:{label:"二等座/硬座"}},[a("span",[t._v(t._s(e.row.low_seat_price_1))])])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"车次"}},[a("span",[t._v(t._s(e.row.train_number_2))])]),t._v(" "),a("el-form-item",{attrs:{label:"特等座/软卧"}},[a("span",[t._v(t._s(e.row.high_seat_price_2))])]),t._v(" "),a("el-form-item",{attrs:{label:"一等座/硬卧"}},[a("span",[t._v(t._s(e.row.medium_seat_price_2))])]),t._v(" "),a("el-form-item",{attrs:{label:"二等座/硬座"}},[a("span",[t._v(t._s(e.row.low_seat_price_2))])])],1)])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发站",prop:"start_station_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"车次",prop:"train_number_1"}}),t._v(" "),a("el-table-column",{attrs:{label:"出发时间",prop:"start_time_1"}}),t._v(" "),a("el-table-column",{attrs:{label:"到达时间",prop:"arrive_time_1"}}),t._v(" "),a("el-table-column",{attrs:{label:"换乘车站",prop:"transfer_station_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"换乘用时",prop:"transfer_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"车次",prop:"train_number_2"}}),t._v(" "),a("el-table-column",{attrs:{label:"出发时间",prop:"start_time_2"}}),t._v(" "),a("el-table-column",{attrs:{label:"到达时间",prop:"arrive_time_2"}}),t._v(" "),a("el-table-column",{attrs:{label:"到达站",prop:"arrive_station_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"总用时",prop:"sum_running_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleSearch(t.searchForm.datetime,e.row.train_no_1,e.row.start_station_no,e.row.transfer_station_no_1,e.row.train_number_1,e.row.train_no_2,e.row.train_number_2,e.row.transfer_station_no_2,e.row.end_station_no)}}},[t._v("查看余票")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"Success"},on:{click:function(a){return t.handleBuy(t.searchForm.datetime,e.row.train_no_1,e.row.start_station_no,e.row.transfer_station_no_1,e.row.train_number_1,e.row.train_no_2,e.row.train_number_2,e.row.transfer_station_no_2,e.row.end_station_no,e.row.high_seat_price_1,e.row.medium_seat_price_1,e.row.low_seat_price_1,e.row.high_seat_price_2,e.row.medium_seat_price_2,e.row.low_seat_price_2)}}},[t._v("预定")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{staticStyle:{width:"1500px"},attrs:{title:"余座数",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.seat_count_list}},[a("el-table-column",{attrs:{property:"train_number",label:"车次",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"carriage_no",label:"车厢号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_count",label:"数量"}})],1)],1)],1)],1)},staticRenderFns:[]}}});