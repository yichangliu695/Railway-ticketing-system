webpackJsonp([2],{228:function(t,e,a){a(295);var r=a(92)(a(261),a(318),null,null);t.exports=r.exports},230:function(t,e,a){a(233);var r=a(92)(a(231),a(234),null,null);t.exports=r.exports},231:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(57),n=a.n(r),i=a(56),s=a.n(i),l=a(58),o=a.n(l),_=a(93),m=(a(95),a(94));e.default={data:function(){return{url:"https://40964096.xyz/xiaojiejie.jpg"}},created:function(){this.adminInfo.id||this.getAdminData()},computed:o()({},a.i(m.b)(["adminInfo"])),methods:o()({},a.i(m.c)(["getAdminData"]),{handleCommand:function(t){var e=this;return s()(n.a.mark(function r(){var i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("home"!=t){r.next=4;break}e.$router.push("/manage"),r.next=9;break;case 4:if("signout"!=t){r.next=9;break}return r.next=7,a.i(_.k)();case 7:i=r.sent,1==i.status?(e.$message({type:"success",message:"退出成功"}),e.$router.push("/")):e.$message({type:"error",message:i.message});case 9:case"end":return r.stop()}},r,e)}))()}})}},232:function(t,e,a){e=t.exports=a(203)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},233:function(t,e,a){var r=a(232);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(204)("1a5dfe8b",r,!0)},234:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[t._v("首页")]),t._v(" "),t._l(t.$route.meta,function(e,r){return a("el-breadcrumb-item",{key:r},[t._v(t._s(e))])})],2),t._v(" "),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.url}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"signout"}},[t._v("退出")])],1)],1)],1)},staticRenderFns:[]}},261:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(18),n=a.n(r),i=a(57),s=a.n(i),l=a(56),o=a.n(l),_=a(230),m=a.n(_),u=(a(95),a(93));a(59);e.default={data:function(){return{value1:!1,tableData:[{train_number:"2016-05-02",start_station:"北京",end_station:"上海",start_time:"2001.10.20.10.10",arrive_time:"2001.10.21.10.10",high_seat_price:"2",medium_seat_price:"32",low_seat_price:"12"}],selectTable:{},searchForm:{start_station:"",end_station:"",datetime:""},high_seat:[{carriage_number:"1",seat_type:"2",upper_num:"3",lower_num:"4"}],medium_seat:[{carriage_number:"1",seat_type:"2",upper_num:"3",middle_num:"5",lower_num:"4"}],low_seat:[{carriage_number:"1",seat_type:"2",A_num:"3",B_num:"5",C_num:"4",D_num:"4",E_num:"4",F_num:"4"}],high_seat_GD:[{carriage_number:"1",seat_type:"2",A_num:"3",B_num:"5",C_num:"4"}],medium_seat_GD:[{carriage_number:"1",seat_type:"2",A_num:"3",B_num:"5",C_num:"4",D_num:"4"}],low_seat_GD:[{carriage_number:"1",seat_type:"2",A_num:"3",B_num:"5",C_num:"4",D_num:"4",E_num:"4"}],dialogTableVisible:!1,dialogTableVisible_GD:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",stationData:[]}},created:function(){var t=this;return o()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.i(u.v)();case 2:r=e.sent,t.stationData=r.dataLists;case 4:case"end":return e.stop()}},e,t)}))()},components:{headTop:m.a},methods:{submitForm:function(t){var e=this;return o()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.$refs[t].validate(function(){var t=o()(s.a.mark(function t(r){var n,i,l,o,_;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=9;break}return n=void 0,n=new Date(e.searchForm.datetime),i=n.getFullYear()+"-"+e.checkTime(n.getMonth()+1)+"-"+e.checkTime(n.getDate()),e.tableData=[],t.next=7,a.i(u.b)({train_start_station:e.searchForm.start_station,train_end_station:e.searchForm.end_station,datetime:i});case 7:if(l=t.sent,1==l.status){for(e.$message({type:"success",message:"查询成功"}),e.tableData=[],o=0;o<l.trainTicketPriceInfoList.length;o++)_={},_.train_no=l.trainTicketPriceInfoList[o].train_no,_.train_number=l.trainTicketPriceInfoList[o].train_number,_.start_station=l.trainTicketPriceInfoList[o].start_station,_.end_station=l.trainTicketPriceInfoList[o].end_station,_.start_time=l.trainTicketPriceInfoList[o].start_time,_.arrive_time=l.trainTicketPriceInfoList[o].arrive_time,_.high_seat_price=l.trainTicketPriceInfoList[o].high_seat_price,_.medium_seat_price=l.trainTicketPriceInfoList[o].medium_seat_price,_.low_seat_price=l.trainTicketPriceInfoList[o].low_seat_price,_.end_no=l.trainTicketPriceInfoList[o].end_no,_.start_no=l.trainTicketPriceInfoList[o].start_no,e.tableData.push(_);console.log(e.tableData),e.TrainRank()}else 404==l.status?e.$message({type:"error",message:"没有符合条件的列车"}):406==l.status?e.$message({type:"error",message:"没有符合条件的列车"}):e.$message({type:"error",message:"查询失败"});case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return r.stop()}},r,e)}))()},handleSearch:function(t,e,r,n,i,l){var _=this;return o()(s.a.mark(function t(){var o,m,c,p,d,b,g,h,f,v,y;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=void 0,o=new Date(e),m=o.getFullYear()+"-"+_.checkTime(o.getMonth()+1)+"-"+_.checkTime(o.getDate()),t.next=5,a.i(u.c)({datetime:m,train_no:r,start_no:n,end_no:i,train_number:l});case 5:if(c=t.sent,1==c.status){if("G"==l[0]||"D"==l[0]){for(_.high_seat_GD=[],_.medium_seat_GD=[],_.low_seat_GD=[],p=0;p<c.trainRemainingSeats_gds.length;p++)"特等座"==c.trainRemainingSeats_gds[p].seat_type&&(d={},d.carriage_number=c.trainRemainingSeats_gds[p].carriage_no,d.seat_type=c.trainRemainingSeats_gds[p].seat_type,d.A_num=c.trainRemainingSeats_gds[p].high_seat_GD_A,d.B_num=c.trainRemainingSeats_gds[p].high_seat_GD_B,d.C_num=c.trainRemainingSeats_gds[p].high_seat_GD_C,_.high_seat_GD.push(d)),"一等座"==c.trainRemainingSeats_gds[p].seat_type&&(b={},b.carriage_number=c.trainRemainingSeats_gds[p].carriage_no,b.seat_type=c.trainRemainingSeats_gds[p].seat_type,b.A_num=c.trainRemainingSeats_gds[p].medium_seat_GD_A,b.B_num=c.trainRemainingSeats_gds[p].medium_seat_GD_B,b.C_num=c.trainRemainingSeats_gds[p].medium_seat_GD_C,b.D_num=c.trainRemainingSeats_gds[p].medium_seat_GD_D,_.medium_seat_GD.push(b)),"二等座"==c.trainRemainingSeats_gds[p].seat_type&&(g={},g.carriage_number=c.trainRemainingSeats_gds[p].carriage_no,g.seat_type=c.trainRemainingSeats_gds[p].seat_type,g.A_num=c.trainRemainingSeats_gds[p].low_seat_GD_A,g.B_num=c.trainRemainingSeats_gds[p].low_seat_GD_B,g.C_num=c.trainRemainingSeats_gds[p].low_seat_GD_C,g.D_num=c.trainRemainingSeats_gds[p].low_seat_GD_D,g.E_num=c.trainRemainingSeats_gds[p].low_seat_GD_E,_.low_seat_GD.push(g));_.dialogTableVisible_GD=!0}else{for(_.high_seat=[],_.medium_seat=[],_.low_seat=[],h=0;h<c.trainRemainingSeats.length;h++)"软卧"==c.trainRemainingSeats[h].seat_type&&(f={},f.carriage_number=c.trainRemainingSeats[h].carriage_no,f.seat_type=c.trainRemainingSeats[h].seat_type,f.upper_num=c.trainRemainingSeats[h].high_seat_upper,f.lower_num=c.trainRemainingSeats[h].high_seat_lower,_.high_seat.push(f)),"硬卧"==c.trainRemainingSeats[h].seat_type&&(v={},v.carriage_number=c.trainRemainingSeats[h].carriage_no,v.seat_type=c.trainRemainingSeats[h].seat_type,v.upper_num=c.trainRemainingSeats[h].medium_seat_upper,v.middle_num=c.trainRemainingSeats[h].medium_seat_middle,v.lower_num=c.trainRemainingSeats[h].medium_seat_lower,_.medium_seat.push(v)),"硬坐"==c.trainRemainingSeats[h].seat_type&&(y={},y.carriage_number=c.trainRemainingSeats[h].carriage_no,y.seat_type="硬座",y.A_num=c.trainRemainingSeats[h].low_seat_A,y.B_num=c.trainRemainingSeats[h].low_seat_B,y.C_num=c.trainRemainingSeats[h].low_seat_C,y.D_num=c.trainRemainingSeats[h].low_seat_D,y.E_num=c.trainRemainingSeats[h].low_seat_E,y.F_num=c.trainRemainingSeats[h].low_seat_F,_.low_seat.push(y));_.dialogTableVisible=!0}_.$message({type:"message",message:"查询成功"})}else 404==c.status?_.$message({type:"error",message:"请输入正确时间"}):_.$message({type:"error",message:"查询失败"});case 7:case"end":return t.stop()}},t,_)}))()},checkTime:function(t){return t<10&&(t="0"+t),t},handleBuy:function(t,e,a,r,i,s,l,o,_){var m=void 0;m=new Date(e),console.log("date"+m),console.log("train_no"+(void 0===s?"undefined":n()(s)));var u=m.getFullYear()+"-"+this.checkTime(m.getMonth()+1)+"-"+this.checkTime(m.getDate());this.$router.push({path:"/TicketOrder",query:{datetime:u,train_no:a,start_no:r,end_no:i,train_number:s,high_seat_price:l,medium_seat_price:o,low_seat_price:_}})},transfer:function(){this.$router.push("/TrainTransferTicketQuery")},TrainRank:function(){if(!1===this.value1){for(var t=0;t<this.tableData.length;t++)for(var e=0;e<this.tableData.length-t-1;e++)if(this.transferTime(this.tableData[e].start_time)>this.transferTime(this.tableData[e+1].start_time)){var a=this.tableData[e];this.tableData[e]=this.tableData[e+1],this.tableData[e+1]=a}}else for(var r=0;r<this.tableData.length;r++)for(var n=0;n<this.tableData.length-r-1;n++)if(this.transferTime(this.tableData[n].running_time)>this.transferTime(this.tableData[n+1].running_time)){var i=this.tableData[n];this.tableData[n]=this.tableData[n+1],this.tableData[n+1]=i}},transferTime:function(t){var e=t.split(":");return 60*parseInt(e[0])+parseInt(e[1])},handelUpdate:function(){this.TrainRank()},querySearch:function(t,e){var a=this;return o()(s.a.mark(function r(){var n,i;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=a.stationData,i=t?n.filter(a.createFilter(t)):n,clearTimeout(a.timeout),a.timeout=setTimeout(function(){e(i)},1e3*Math.random());case 4:case"end":return r.stop()}},r,a)}))()},createFilter:function(t){return function(e){return-1!==e.value.toLowerCase().indexOf(t.toLowerCase())}}}}},272:function(t,e,a){e=t.exports=a(203)(!1),e.push([t.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.demo-table-expand{font-size:0}.demo-table-expand label{width:90px;color:#99a9bf}.demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:50%}.table_container{padding:20px}.Pagination{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;margin-top:8px}.avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload:hover{border-color:#20a0ff}.avatar-uploader-icon{font-size:28px;color:#8c939d;width:120px;height:120px;line-height:120px;text-align:center}.avatar{width:120px;height:120px;display:block}",""])},295:function(t,e,a){var r=a(272);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(204)("17db5f85",r,!0)},318:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("meta",{attrs:{"http-equiv":"Cache-Control",content:"no-cache,no-store,must-revlidate"}}),t._v(" "),a("meta",{attrs:{"http-equiv":"Expires",content:"O"}}),t._v(" "),a("meta",{attrs:{"http-equiv":"Pragma",content:"no-cache"}}),t._v(" "),a("head-top"),t._v(" "),a("el-form",{ref:"searchForm",attrs:{model:t.searchForm}},[a("el-row",{staticStyle:{"margin-left":"180px","margin-top":"10px",width:"1000px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入始发站","trigger-on-focus":!0},on:{select:t.handleSelect},model:{value:t.searchForm.start_station,callback:function(e){t.$set(t.searchForm,"start_station",e)},expression:"searchForm.start_station"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"margin-left":"20px"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.querySearch,placeholder:"请输入终点站","trigger-on-focus":!0},on:{select:t.handleSelect},model:{value:t.searchForm.end_station,callback:function(e){t.$set(t.searchForm,"end_station",e)},expression:"searchForm.end_station"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{"margin-left":"20px"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.searchForm.datetime,callback:function(e){t.$set(t.searchForm,"datetime",e)},expression:"searchForm.datetime"}})],1)])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.submitForm("searchForm")}}},[t._v("搜索")])],1)]),t._v(" "),a("el-switch",{staticStyle:{"margin-top":"30px","margin-left":"20px"},attrs:{"inactive-text":"按开车时间排序","active-text":"按运行时间排序"},nativeOn:{click:function(e){return t.handelUpdate()}},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)],1),t._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"train_number"}},[a("el-table-column",{attrs:{label:"车次",prop:"train_number"}}),t._v(" "),a("el-table-column",{attrs:{label:"出发站",prop:"start_station"}}),t._v(" "),a("el-table-column",{attrs:{label:"到达站",prop:"end_station"}}),t._v(" "),a("el-table-column",{attrs:{label:"出发时间",prop:"start_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"到达时间",prop:"arrive_time"}}),t._v(" "),a("el-table-column",{attrs:{label:"特等座/软卧",prop:"high_seat_price"}}),t._v(" "),a("el-table-column",{attrs:{label:"一等座/硬卧",prop:"medium_seat_price"}}),t._v(" "),a("el-table-column",{attrs:{label:"二等座/硬座",prop:"low_seat_price"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleSearch(e.$index,t.searchForm.datetime,e.row.train_no,e.row.start_no,e.row.end_no,e.row.train_number)}}},[t._v("查看余票")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"Success"},on:{click:function(a){return t.handleBuy(e.$index,t.searchForm.datetime,e.row.train_no,e.row.start_no,e.row.end_no,e.row.train_number,e.row.high_seat_price,e.row.medium_seat_price,e.row.low_seat_price)}}},[t._v("预定")])]}}])})],1),t._v(" "),a("el-dialog",{staticStyle:{width:"1500px"},attrs:{title:"余座数",visible:t.dialogTableVisible_GD},on:{"update:visible":function(e){t.dialogTableVisible_GD=e}}},[a("el-table",{attrs:{data:t.high_seat_GD}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"A_num",label:"A座"}}),t._v(" "),a("el-table-column",{attrs:{property:"B_num",label:"B座"}}),t._v(" "),a("el-table-column",{attrs:{property:"C_num",label:"C座"}})],1),t._v(" "),a("el-table",{attrs:{data:t.medium_seat_GD}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"A_num",label:"A座"}}),t._v(" "),a("el-table-column",{attrs:{property:"B_num",label:"B座"}}),t._v(" "),a("el-table-column",{attrs:{property:"C_num",label:"C座"}}),t._v(" "),a("el-table-column",{attrs:{property:"D_num",label:"D座"}})],1),t._v(" "),a("el-table",{attrs:{data:t.low_seat_GD}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"A_num",label:"A座"}}),t._v(" "),a("el-table-column",{attrs:{property:"B_num",label:"B座"}}),t._v(" "),a("el-table-column",{attrs:{property:"C_num",label:"C座"}}),t._v(" "),a("el-table-column",{attrs:{property:"D_num",label:"D座"}}),t._v(" "),a("el-table-column",{attrs:{property:"E_num",label:"E座"}})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{width:"1500px"},attrs:{title:"余座数",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.high_seat}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"upper_num",label:"上铺"}}),t._v(" "),a("el-table-column",{attrs:{property:"lower_num",label:"下铺"}})],1),t._v(" "),a("el-table",{attrs:{data:t.medium_seat}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"upper_num",label:"上铺"}}),t._v(" "),a("el-table-column",{attrs:{property:"middle_num",label:"中铺"}}),t._v(" "),a("el-table-column",{attrs:{property:"lower_num",label:"下铺"}})],1),t._v(" "),a("el-table",{attrs:{data:t.low_seat}},[a("el-table-column",{attrs:{property:"carriage_number",label:"车厢号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"seat_type",label:"座位类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"A_num",label:"A座"}}),t._v(" "),a("el-table-column",{attrs:{property:"B_num",label:"B座"}}),t._v(" "),a("el-table-column",{attrs:{property:"C_num",label:"C座"}}),t._v(" "),a("el-table-column",{attrs:{property:"D_num",label:"D座"}}),t._v(" "),a("el-table-column",{attrs:{property:"E_num",label:"E座"}}),t._v(" "),a("el-table-column",{attrs:{property:"F_num",label:"F座"}})],1)],1)],1)],1)},staticRenderFns:[]}}});